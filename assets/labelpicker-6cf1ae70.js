import{a as I,O as y,C as f,b as w}from"./style-5f51f46b.js";class L{static async UpdateLabel(n,l){const h=I(n.id,l.Id),b=await y.scene.items.getItems([h]),m="#242424";let s=0;if(b.length===0){const o=await y.scene.items.getItems(a=>a.attachedTo===n.id&&a.type==="LABEL"&&a.style.pointerDirection===d(l.Direction));if(o.length>0){for(let a=0;a<o.length+1;a++)if(!o.find(t=>t.metadata[`${f.EXTENSIONID}/place`].placement===a)){s=a;break}}let r={};r[`${f.EXTENSIONID}/place`]={placement:s};const e=w().fillColor(l.Color).plainText(l.Name).strokeWidth(5).build();e.id=h,e.type="LABEL",e.attachedTo=n.id,e.visible=!!n.visible,e.locked=!0,e.position={x:n.position.x,y:n.position.y},e.metadata=r;let i,u=15,p=15;l.Direction=="Top"&&(e.position.y-=n.image.height*n.scale.y/4,i="DOWN",o.length>0&&s!==0&&(e.position.y-=15,e.position.y-=35*s)),l.Direction=="Bottom"&&(e.position.y+=n.image.height*n.scale.y/4,i="UP",o.length>0&&s!==0&&(e.position.y+=15,e.position.y+=35*s)),l.Direction=="Right"&&(e.position.x+=n.image.width*n.scale.x/4,i="LEFT",o.length>0&&s!==0&&(e.position.y+=35*s)),l.Direction=="Left"&&(e.position.x-=n.image.width*n.scale.x/4,i="RIGHT",o.length>0&&s!==0&&(e.position.y-=35*s)),o.length>0&&s!==0&&(u=0,p=0),e.style={backgroundColor:m,backgroundOpacity:.85,pointerDirection:i,pointerWidth:p,pointerHeight:u,cornerRadius:10},await y.scene.items.addItems([e])}else await y.scene.items.deleteItems([h]);function d(o){switch(o){case"Top":return"DOWN";case"Bottom":return"UP";case"Right":return"LEFT";case"Left":return"RIGHT";default:throw new Error("Invalid direction")}}}}y.onReady(async()=>{document.documentElement.style.borderColor="#A73335",document.documentElement.style.borderStyle="solid",document.documentElement.style.borderWidth="2px",document.documentElement.style.borderRadius="16px",document.documentElement.style.height="100%";const g=window.location.search,l=new URLSearchParams(g).get("targetid"),m=(await y.room.getMetadata())[`${f.EXTENSIONID}/metadata_marks`]?.saveData;if(m&&m.Labels?.length>0){let d=function(t){t==="#1"?(o.style.display="",r.style.display="none",e.style.display="none"):t==="#2"?(o.style.display="none",r.style.display="",e.style.display="none"):(o.style.display="none",r.style.display="none",e.style.display="")};const o=document.querySelector("#label-list1"),r=document.querySelector("#label-list2"),e=document.querySelector("#label-list3"),i=document.createElement("button");i.className="categoryButton",i.onclick=()=>d("#1");const u=document.createElement("button");u.className="categoryButton",u.onclick=()=>d("#2");const p=document.createElement("button");p.className="categoryButton",p.onclick=()=>d("#3");const a=document.querySelector(".footer");a.appendChild(i),a.appendChild(u),a.appendChild(p),m.Groups.forEach(t=>{switch(t.Num){case"#1":i.innerText=t.Name;break;case"#2":u.innerText=t.Name;break;case"#3":p.innerText=t.Name;break;default:throw new Error("Invalid Group")}}),m.Labels.forEach(t=>{if(t.Active){const c=document.createElement("button");c.id=`toggle-${t.Id}`,c.className="group1",c.value=t.Name,c.title=t.Name,c.textContent=t.Name,t.Group==="#1"?o.appendChild(c):t.Group==="#2"?r.appendChild(c):e.appendChild(c)}}),document.querySelectorAll(".group1").forEach(t=>{t.addEventListener("click",async c=>await s(c.currentTarget.id))}),d("#1")}else document.querySelector("#label-list1").innerHTML=`
        <div>
        No labels found.
        </div>`;async function s(d){const o=d.substring(7),r=m.Labels.find(i=>i.Id===o),e=await y.scene.items.getItems([l]);await L.UpdateLabel(e[0],r),console.log("Labeled")}});
